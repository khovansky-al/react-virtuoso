{"version":3,"sources":["grouped-endless-scrolling.tsx"],"names":[],"mappings":"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","file":"grouped-endless-scrolling.24985a0f.js","sourceRoot":"../examples","sourcesContent":["import * as React from 'react'\nimport { Components, GroupedVirtuoso } from '../src'\nimport { useMemo, useRef, useState, useEffect, useCallback } from 'react'\nimport faker from 'faker'\nimport { groupBy } from 'lodash'\n\nconst getUser = () => {\n  const firstName = faker.name.firstName()\n  const lastName = faker.name.lastName()\n  return {\n    name: `${firstName} ${lastName}`,\n    initials: `${firstName.substr(0, 1)}${lastName.substr(0, 1)}`,\n    description: faker.company.catchPhrase(),\n    avatar: faker.internet.avatar(),\n  }\n}\n\ntype User = ReturnType<typeof getUser>\n\nconst sortUser = (a: User, b: User) => {\n  if (a.name < b.name) {\n    return -1\n  }\n  if (a.name > b.name) {\n    return 1\n  }\n  return 0\n}\n\nconst useGroupedUsers = (count: number) => {\n  const allUsers = useMemo(() => Array.from({ length: count }, getUser).sort(sortUser), [count])\n\n  const loadedCount = useRef(0)\n  const loadedUsers = useRef<User[]>([])\n  const groups = useRef<string[]>([])\n  const [endReached, setEndReached] = useState(false)\n  const [groupCounts, setGroupCounts] = useState<number[]>([])\n\n  const loadMore = useCallback(() => {\n    if (!endReached) {\n      setTimeout(() => {\n        loadedCount.current += 50\n\n        // in a real world scenario, you would fetch the next\n        // slice and append it to the existing records\n        loadedUsers.current = allUsers.slice(0, loadedCount.current)\n\n        // the code below calculates the group counts\n        // for the users loaded so far;\n        // this should be performed on the server too\n        const groupedUsers = groupBy(loadedUsers.current, (user) => user.name[0])\n        groups.current = Object.keys(groupedUsers)\n        setGroupCounts(Object.values(groupedUsers).map((users) => users.length))\n\n        if (loadedCount.current === count) {\n          setEndReached(true)\n        }\n      }, 30)\n    }\n  }, [allUsers, endReached, count])\n\n  return {\n    loadMore,\n    endReached,\n    groupCounts,\n    users: loadedUsers.current,\n    groups: groups.current,\n  }\n}\n\nconst components: Partial<Components> = {\n  Footer: () => <div>Footer</div>,\n\n  List: React.forwardRef(({ style, children }, listRef) => {\n    return (\n      <div ref={listRef} style={style}>\n        {children}\n      </div>\n    )\n  }),\n\n  Item: ({ children, ...props }) => {\n    return (\n      <div {...props} style={{ margin: 0 }}>\n        {children}\n      </div>\n    )\n  },\n\n  Group: ({ children, ...props }) => {\n    return <div {...props}>{children}</div>\n  },\n}\nconst Style = { height: '350px', width: '300px' }\n\nexport default function App() {\n  const { loadMore, groupCounts, users, groups } = useGroupedUsers(12500)\n\n  useEffect(loadMore, [loadMore])\n\n  return (\n    <GroupedVirtuoso\n      components={components}\n      style={Style}\n      groupCounts={groupCounts}\n      groupContent={(index) => <div>Group {groups[index]}</div>}\n      overscan={400}\n      endReached={(_) => {\n        loadMore()\n      }}\n      itemContent={(index) => (\n        <div>\n          <div>\n            <strong>{users[index].name}</strong>\n          </div>\n          <div>\n            {users[index].description}\n            {users[index].description}\n          </div>\n        </div>\n      )}\n    />\n  )\n}\n"]}